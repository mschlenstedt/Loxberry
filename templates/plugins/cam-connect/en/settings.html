  <!-- content -->
  <div role="main" class="ui-content">
    <div class="ui-body ui-body-a ui-corner-all loxberry-logo">
    <!-- text -->
    <div style="margin: 10px;">
      <center>
      <table border=0 cellpadding=10>
       <tr>
        <td align="right"><img src="/plugins/cam-connect/cam.png"></td>
        <td><b>Configuration Settings for the <!--$plugin_name--> Plugin</b></td>
        <td></td>
			 </tr>
       <tr>
        <td colspan="3">
           <form method="post" data-ajax="false" name="main_form" id="main_form" action="./index.cgi">
           <label><input type="checkbox" id="plugin_watermark" name="plugin_watermark"><!--$plugin_watermark_label--></label>
           <script><!--$plugin_watermark--></script>
	
			     <center>
          <a id="btncancel" data-role="button" data-inline="true" data-mini="true" data-icon="delete" href="/admin/index.cgi">Cancel</a>
          <input type="hidden" name="saveformdata" value="1">
          <input type="hidden" name="lang" value="<!--$lang-->">
          <button type="submit" form="main_form" id="btnsubmit" data-role="button" data-inline="true" data-mini="true" data-icon="check">Save</button>
          </form>
        </center>
        </td>
			 </tr>
		   <tr>
         <td colspan="3" width="100%" >
	        <hr>
          This page can help you to find the correct URL for your Loxone Config Parameter of the Loxone Intercom Object. 
          </td>
        </tr>
		   <tr>
         <td align="right">
         <label id="label_cam_host_or_ip">
         	Cam-IP-Address or Hostname:<br/><small><i>Please enter the port only if different from 80.</label>
         </td>
         <td>
         <input id="cam_host_or_ip" name="cam_host_or_ip" type="text" class="textfield" value="Camera-Hostname:80">
         </td>
         <td>
         &nbsp;
         </td>
       </tr>
  	   <tr>
          <td align="right">
          <label id="label_cam_model">Camera-Model:</label>
          </td>
          <td>
	         <select style="align:left;" id="cam_model" name="cam_model" data-mini="false">
            <!--$cam_model_list-->
           </select>
          </td>
        <td>&nbsp;</td>
        </tr>
		   <tr>
         <td align="right">
         <label id="label_cam_user">Camera-Username:</label>
         </td>
         <td>
         <input id="cam_user" name="cam_user" type="text" class="textfield" value="Username">
         </td>
         <td>
         &nbsp;
         </td>
       </tr>
       <tr>
         <td align="right">
         <label id="label_cam_pass">Camera-Password:</label>
         </td>
         <td>
         <input id="cam_pass" type="text" class="textfield" value="Password">
         </td>
         <td>
         &nbsp;
         </td>
       </tr>
       <tr>
        <td colspan="3" width="100%">
          <hr>
          Please paste the following URL in the Loxone Config into the Loxone Intercom-Object in the field "Picture when ringing (internal)":<br/>
          <br/>
         <font face="courier"><b>http://<!--$self_host--><!--$plugin_script-->?kamera=<span style="color:#4040FF" id="cam_host_or_ip_url">?</span><span id="cam_path">?</span>&user=<span style="color:#FF40C0" id="cam_user_url">?</span>&pass=<span style="color:#c080FF" id="cam_pass_url">?</span></b></font>
        <br/><center><a id="btntest" data-role="button" data-inline="true" data-mini="true" data-icon="refresh" href="#">Test</a></center>
        </td>
      </tr>
      </table>
      </center>
      <p>
      &nbsp;
      </p>
    </div>
    <!-- /text -->
    </div>

  </div>

<script>
var $messages = $('#form-error-message');
$.validate({
  modules : 'security',
  errorMessagePosition : $messages,
});

// Init
$( "#cam_path" ).html( $( "#cam_model").val() );
$( "#cam_host_or_ip_url" ).html($( "#cam_host_or_ip").val()); 
$( "#cam_user_url" ).html($( "#cam_user").val()); 
$( "#cam_pass_url" ).html($( "#cam_pass").val()); 

$( "#btntest" ).css('visibility', 'hidden');
$( "#cam_model").change(function()  { 	$( "#cam_path" ).html( $( "#cam_model").val() ); });
$( "#cam_host_or_ip" ).keyup(function( event ) { $( "#cam_host_or_ip_url" ).html($( "#cam_host_or_ip").val()); $( "#btntest" ).css('visibility', 'visible')});
$( "#cam_user" ).keyup(function( event ) { $( "#cam_user_url" ).html($( "#cam_user").val()); $( "#btntest" ).css('visibility', 'visible')});
$( "#cam_pass" ).keyup(function( event ) { $( "#cam_pass_url" ).html($( "#cam_pass").val()); $( "#btntest" ).css('visibility', 'visible')});
$( "#btntest" ).click( function () { url2open = "http://<!--$self_host--><!--$plugin_script-->?kamera=" + $( "#cam_host_or_ip").val() + 	 $( "#cam_model").val()  + "&user=" + 	 $( "#cam_user").val() + "&pass=" + $( "#cam_pass").val(); window.open(url2open, 'Cam-Connect','status=no,scrollbars=no,titlebar=no,toolbar=no,menubar=no,location=no');});
</script>

  <!-- /content -->
