  <!-- content -->

  <div role="main" class="ui-content">
    <div class="ui-body ui-body-a ui-corner-all">

    <!-- text -->
    <div style="margin: 5%;">
      <h2>2nd Step: Miniserver Settings</h2>

      <p>
      In this step the Miniserver Settings have to be done. We need to manage the IP-Address and Portnumber to reach your Miniserver in your network.
      We need also the Username and Password of a Miniserver Administrator-Account. These Datas are neccessary to access and control the Miniserver.
      <b>Note:</b> If your installation includes more than one Miniserver, you will be able to include more Miniservers later on after you have finished
      this assistant.
      </p>

      <p>
      If you are not sure which IP-Address is used by your Miniserver in youe network, try the Scan-Button next to the input box.
      The Loxberry will scan your network and puts a reachable Miniserver IP-Address in the input box.
      You can also use the Loxone Config-Software to memorize the IP-Address and Portnumber from the Connection Dialog if the scan fails.
      </p>

      <form method="post" data-ajax="false" name="main_form2" id="main_form2" action="/admin/system/setup/index.cgi?step=<!--$step-->&lang=<!--$lang-->&sid=<!--$sid-->">
      <input type="hidden" name="saveformdata" value="1">
      <div class="form-group">
        <table class="formtable" border="0" width="100%">
        <tr>
          <td width="25%">
          <label class="control-label" for="miniserverip">IP-Address or Hostname:</label>
          </td>
          <td width="50%">
          <input id="miniserverip" name="miniserverip" type="text" class="textfield" data-validation="custom" value="<!--$miniserverip-->"
          data-validation-regexp="(^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$)|(^[a-z0-9A-Z\.]+$)" data-validation-error-msg="* he entered IP-Address or Hostname is not valid.
          An IP-Address has the format xxx.xxx.xxx.xxx, e. g. 192.168.1.100<br>">
          </td>
          <td width="5%">
          <a id="btnnetscan" data-role="button" data-inline="true" data-mini="true" data-icon="check" href="#"><font size="-1">Scan</font>
          </td>
          <td width="20%">
          <font size="-1"><div id="testurl"></div></font>
          </td>
        </tr>
        <tr>
          <td>
          <label>Portnumber:</label>
          </td>
          <td>
          <input id="miniserverport" name="miniserverport" type="text" data-validation="number" data-validation-allowing="range[1;65535]" class="textfield" 
          value="<!--$miniserverport-->" data-validation-error-msg="* The Portnumber must be in the range of 1 and 65535. The default Miniserver-Port is 80.">
          </td>
          <td>
          &nbsp;
          </td>
          <td>
          <font size="-1">The default Port is <b>80</b></font>
					</td>
        </tr>
     <tr>
          <td>
          <label>Miniserver Username:</label>
          </td>
          <td>
          <input id="miniserveruser" name="miniserveruser" type="text" data-validation="length" data-validation-length="Min1" class="textfield"
          value="<!--$miniserveruser-->" data-validation-error-msg="* Please enter the username of a Miniserver Administrator account.">
          </td>
          <td>
          &nbsp;
          </td>
          <td>
          <font size="-1"></font>
          </td>
        </tr>
        <tr>
          <td>
          <label>Miniserver Password:</label>
          </td>
          <td>
          <input id="miniserverkennwort" name="miniserverkennwort" type="password" data-validation="length" data-validation-length="Min1" class="textfield"
          value="<!--$miniserverkennwort-->" data-validation-error-msg="* Please enter the password for the above Miniserver Administrator account.">
          </td>
          <td>
          &nbsp;
          </td>
          <td>
          <font size="-1"></font>
          </td>
        </tr>
        <tr>
          <td colspan=4>
          &nbsp;
          </td>
        </tr>
        <tr>
          <td></td>
          <td colspan=3>
          <div id="form-error-message" class="form-error-message"></div>
          </td>
        </tr>
        </table>
      </div>
      </form>

      <p>
      &nbsp;
      </p>

      <p>
      <center>
      <a id="btncancel" data-role="button" data-inline="true" data-mini="true" data-icon="delete" href="/admin/index.cgi?lang=<!--$lang-->">Cancel</a>
      <a id="btnback" data-role="button" data-inline="true" data-mini="true" data-icon="arrow-l"
         href="/admin/system/setup/index.cgi?step=1&lang=<!--$lang-->&sid=<!--$sid-->" >Back</a>
      <button type="submit" form="main_form2" id="btnsubmit" data-role="button" data-inline="true" data-mini="true" data-icon="check">Proceed to Step 3</button>
      </center>
      </p>

    </div>
    <!-- /text -->
    </div>

  </div>

  <script>
  var $messages = $('#form-error-message');
  $.validate({
    modules : 'security',
    errorMessagePosition : $messages,
  });
  </script>

  <!-- /content -->
